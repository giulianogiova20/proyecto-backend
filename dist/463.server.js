"use strict";exports.id=463,exports.ids=[463],exports.modules={378:(t,e,o)=>{o.d(e,{Z:()=>u});var n=o(185),r=o.n(n),d=o(320),i=o(826);const u=class{constructor(t){this.model=t,this.connect()}connect(){return t=this,e=void 0,n=function*(){try{yield r().connect(d.Z.mongoDB.URI),i.Z.info("connected to mongoDB Atlas")}catch(t){i.Z.error(t)}},new((o=void 0)||(o=Promise))((function(r,d){function i(t){try{c(n.next(t))}catch(t){d(t)}}function u(t){try{c(n.throw(t))}catch(t){d(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(i,u)}c((n=n.apply(t,e||[])).next())}));var t,e,o,n}}},463:(t,e,o)=>{o.r(e),o.d(e,{default:()=>l});var n=o(826),r=o(378),d=o(185),i=o.n(d);const u=new(i().Schema)({products:[{type:Object,required:!0,ref:"products"}],user:{type:String,required:!0},timestamp:{type:Number,required:!0,default:Date.now}}),c=i().model("carts",u);var s=function(t,e,o,n){return new(o||(o=Promise))((function(r,d){function i(t){try{c(n.next(t))}catch(t){d(t)}}function u(t){try{c(n.throw(t))}catch(t){d(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(i,u)}c((n=n.apply(t,e||[])).next())}))};class a extends r.Z{constructor(){super(c)}createNewCart(t){return s(this,void 0,void 0,(function*(){const e=new this.model({user:t.id,products:[]});yield e.save()}))}deleteCartById(t){return s(this,void 0,void 0,(function*(){const e=yield this.model.findOne({user:t.id});if(null===e)return{error:"Cart not found"};0===(yield this.model.updateOne({_id:e._id},{$set:{products:[]}})).modifiedCount?n.Z.error("Products not deleted from cart"):n.Z.info("Products deleted from cart")}))}getProductsByCartId(t){return s(this,void 0,void 0,(function*(){const e=yield this.model.findOne({user:t.id});if(null===e)return{error:"Cart not found"};{const t=e.products;return n.Z.info(`Cart: ${t}`),t}}))}addProductsById(t,e){return s(this,void 0,void 0,(function*(){const o=yield this.model.findOne({user:e.id});if(null===o)return{error:"Cart not found"};0===(yield this.model.updateOne({_id:o._id},{$push:{products:t}})).modifiedCount?n.Z.error("Product not added to cart"):n.Z.info("Product added to cart")}))}deleteProductByCartId(t,e){return s(this,void 0,void 0,(function*(){const o=yield this.model.findOne({user:t.id});if(null===o)return{error:"Cart not found"};0===(yield this.model.updateOne({_id:o._id},{$pull:{products:{id:e.id}}})).modifiedCount?n.Z.error("Product not deleted from cart"):n.Z.info("Product deleted from cart")}))}}const l=new a}};