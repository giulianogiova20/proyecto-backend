"use strict";exports.id=11,exports.ids=[11],exports.modules={378:(t,e,n)=>{n.d(e,{Z:()=>c});var o=n(185),r=n.n(o),d=n(320),i=n(826);const c=class{constructor(t){this.model=t,this.connect()}connect(){return t=this,e=void 0,o=function*(){try{yield r().connect(d.Z.mongoDB.URI),i.Z.info("connected to mongoDB Atlas")}catch(t){i.Z.error(t)}},new((n=void 0)||(n=Promise))((function(r,d){function i(t){try{u(o.next(t))}catch(t){d(t)}}function c(t){try{u(o.throw(t))}catch(t){d(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}u((o=o.apply(t,e||[])).next())}));var t,e,n,o}}},11:(t,e,n)=>{n.r(e),n.d(e,{default:()=>l});var o=n(378),r=n(185),d=n.n(r);const i=new(d().Schema)({name:{type:String,required:!0,minlength:3,maxlength:70},price:{type:Number,required:!0,min:0},description:{type:String,required:!1,minlength:6,maxlength:200},photoURL:{type:String,required:!0,minlength:8,maxlength:200},stock:{type:Number,required:!1,min:0},timestamp:{type:Number,required:!1,default:Date.now}}),c=d().model("products",i);var u=function(t,e,n,o){return new(n||(n=Promise))((function(r,d){function i(t){try{u(o.next(t))}catch(t){d(t)}}function c(t){try{u(o.throw(t))}catch(t){d(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}u((o=o.apply(t,e||[])).next())}))};class s extends o.Z{constructor(){super(c)}getAll(){return u(this,void 0,void 0,(function*(){try{return yield this.model.find({})}catch(t){console.log(t)}}))}getById(t){return u(this,void 0,void 0,(function*(){try{const e=yield this.model.findOne({_id:t},{__v:0});return null===e?{error:"Product not found"}:e}catch(t){console.log("Method getById: ",t)}}))}addProduct(t){return u(this,void 0,void 0,(function*(){const e=new this.model(t);return yield e.save()}))}updateProduct(t,e){return u(this,void 0,void 0,(function*(){try{return 0===(yield this.model.updateOne({_id:t},e)).matchedCount?{error:"Product not found."}:{msg:`Product ${t} updated!`}}catch(t){console.log("Method update: ",t)}}))}deleteProduct(t){return u(this,void 0,void 0,(function*(){try{return 0===(yield this.model.deleteOne({_id:t})).deletedCount?{error:"Product not found."}:{msg:"Product deleted."}}catch(t){console.log("Method deleteById: ",t)}}))}}const l=new s}};